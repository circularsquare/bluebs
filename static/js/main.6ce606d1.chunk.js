(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t){t=e.exports={};t.getNum=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t)for(var s=0,a=Object.keys(t);s<a.length;s++){var o=a[s];if(o==e)return[t[o],"building"]}if(n)for(var i=0,c=Object.keys(n);i<c.length;i++){var l=c[i];if(l==e)return[n[l],"resource"]}if(r)for(var u=0,p=Object.keys(r);u<p.length;u++){var h=p[u];if(h==e)return[r[h],"tech"]}return!1}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]&&arguments[3]);return"tech"==t[1]?t[0].researched:"building"==t[1]?t[0].number:(t[1],t[0])},t.round=function(e){return e>1e6?parseFloat((e/1e6).toFixed(2))+"m":e>1e3?parseFloat((e/1e3).toFixed(2))+"k":e>100?Math.round(e):Math.abs(e-Math.round(e))>.001?e.toFixed(2):Math.round(e)}},29:function(e,t,n){e.exports=n(64)},38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(12),o=n(6),i=n(1),c=n(2),l=n(4),u=n(3),p=n(5),h=(n(38),function(e){return{type:"SEND_INFO",info:e}}),d=function(e,t){return{type:"ADD_TAB",key:e,name:t}},b=function(e){return{type:"ADD_RESOURCE",name:e}},m=function(e){return{type:"ADD_MAP",map:e}},f=function(e){return{type:"ADD_BUILDING",name:e}},v=function(e,t){return{type:"BUILD",name:e,n:t}},g=function(e,t){return{type:"HARVEST",name:e,n:t}},y=function(e,t){return{type:"HIRE",name:e,n:t}},E=0,k=function(e,t,n,r){return{type:"SPAWN_UNIT",id:E++,name:e,species:t,job:n,location:r}},O=function(e){return{type:"RESEARCH",name:e}},j=function(e,t){return{type:"APPLY_EFFECTS",name:e,n:t}},w=function(e,t){return{type:"APPLY_MODIFIERS",name:e,n:t}},N=n(14),x=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"round",value:function(e){return e>1e6?parseFloat((e/1e6).toFixed(2))+"m":e>1e3?parseFloat((e/1e3).toFixed(2))+"k":e>100?Math.round(e):Math.abs(e-Math.round(e))>.001?e.toFixed(2):Math.round(e)}},{key:"getEffects",value:function(e,t,n){for(var r=this,a=[{},{},{},{}],o="max"+e,i=0,c=Object.keys(t.income);i<c.length;i++){var l=c[i];if(e in t.income[l]){var u=t.income[l][e]*N.getNum(l,this.props.buildings,this.props.resources,this.props.tech);u&&(a[0][l]=u)}}for(var p=0,h=Object.keys(t.constant);p<h.length;p++){l=h[p];if(e in t.constant[l]){var d=t.constant[l][e]*N.getNum(l,this.props.buildings,this.props.resources,this.props.tech);d&&(a[1][l]=d)}if(o in t.constant[l]){var b=t.constant[l][o]*N.getNum(l,this.props.buildings,this.props.resources,this.props.tech);b&&(a[2][l]=b)}}for(var m=0,f=Object.keys(t.modifiers);m<f.length;m++){l=f[m];if(e in Object.keys(t.modifiers[l])){var v=t.modifers[l][e]*N.getNum(l,this.props.buildings,this.props.resources,this.props.tech);v&&(a[3][l]=v)}}var g=Object.keys(a[0]).map(function(e){return s.a.createElement("div",{className:"effect-detail"}," \xa0 ",e,": ",r.round(10*a[0][e]),"/s ",s.a.createElement("br",null)," ")}),y=(Object.keys(a[1]).map(function(e){return s.a.createElement("div",{className:"effect-detail"}," \xa0 ",e,": ",r.round(a[1][e])," ",s.a.createElement("br",null)," ")}),Object.keys(a[2]).map(function(e){return s.a.createElement("div",{className:"effect-detail"}," \xa0 ",e,": ",r.round(a[2][e])," ",s.a.createElement("br",null)," ")}));Object.keys(a[3]).map(function(e){return s.a.createElement("div",{className:"effect-detail"}," \xa0 ",e,": ",a[3][e]," ",s.a.createElement("br",null)," ")});if(Object.keys(a[0]).length>0)var E="income: "+this.round(10*Object.values(a[0]).reduce(function(e,t){return e+t},0))+"/s",k=s.a.createElement("div",null,E,g);if(Object.keys(a[1]).length,Object.keys(a[2]).length>0)var O="cap: "+this.round(n[o]),j=s.a.createElement("div",null,O,y);return Object.keys(a[3]).length,s.a.createElement("div",null,k,j)}},{key:"render",value:function(){var e=this,t=this.props.visibleResources,n=this.props.resources,r="sidebar-"+this.props.time[0];return s.a.createElement("div",{className:"sidebar-wrapper"},s.a.createElement("div",{className:r},this.props.time[0]," day ",this.props.time[1]," ",s.a.createElement("br",null),"~~~~~~~~~~~~~~~~~~",["birbs","bluebs","wood","clay","stone","knowledge","ceramic","boxes","drawings","books","happiness"].map(function(r){return s.a.createElement(I,{name:r,res:n,show:t,getEffects:function(){return e.getEffects(r,e.props.effects,n)}})})))}}]),t}(r.Component);function I(e){return s.a.createElement(C,{name:e.name,res:e.res[e.name],max:e.res["max"+e.name],show:e.show,getEffects:e.getEffects})}var C=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"round",value:function(e){return e>=1e6?parseFloat((e/1e6).toFixed(2))+"m":e>=1e3?parseFloat((e/1e3).toFixed(2))+"k":e>=100?Math.round(e):Math.abs(e-Math.round(e))<.001?Math.round(e):e>=10?e.toFixed(1):e.toFixed(2)}},{key:"colorDict",value:function(e){return{birbs:"#953",bluebs:"#33a",wood:"#853",knowledge:"#919",clay:"#b51",stone:"#888",happiness:"#bb1"}[e]}},{key:"render",value:function(){var e=s.a.createElement("div",{className:"sidebar-item-mouseover"},this.props.getEffects()),t={color:this.colorDict(this.props.name)};return this.props.show.includes(this.props.name)?this.props.max?s.a.createElement("div",{className:"sidebar-item"},s.a.createElement("span",{style:t},this.props.name),": ",this.round(this.props.res),"/",this.round(this.props.max)," ",s.a.createElement("br",null),e):s.a.createElement("div",{className:"sidebar-item"},s.a.createElement("span",{style:t},this.props.name),": ",this.round(this.props.res)," ",s.a.createElement("br",null),e):s.a.createElement("div",null)}}]),t}(r.Component),R=x,T=Object(o.b)(function(e){return{resources:e.resources,buildings:e.buildings,techs:e.techs,visibleResources:e.info.visibleResources,time:e.info.time,effects:e.effects}},{})(R);var S=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"infobox"},this.props.info.map(function(e){return s.a.createElement("div",null," ",e," ",s.a.createElement("br",null)," ")}))}}]),t}(r.Component),M={sendInfo:h},D=Object(o.b)(function(e){return{info:e.info.info}},M)(S),B=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClickTabItem=function(e){n.setState({activeTab:e})},n.state={activeTab:n.props.children[0].props.label},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.onClickTabItem,n=this.props.children,r=this.state.activeTab;return s.a.createElement("div",{className:"tabs"},s.a.createElement("ul",{className:"tab-list"},n.map(function(n){var a=n.props.label;if(a in e.props.visibleTabs)return s.a.createElement(_,{activeTab:r,key:a,label:a,name:e.props.visibleTabs[a],onClick:t})})),s.a.createElement("div",{className:"tab-content"},n.map(function(e){if(e.props.label===r)return e.props.children})))}}]),t}(r.Component),_=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onClick=function(){var e=n.props,t=e.label;(0,e.onClick)(t)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.onClick,t=this.props,n="tab-list-item";return t.activeTab===t.label&&(n+=" tab-list-active"),s.a.createElement("li",{className:n,onClick:e},this.props.name)}}]),t}(r.Component),A=B,U=Object(o.b)(function(e){return{visibleTabs:e.info.visibleTabs}},{})(A),F=n(14),P=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"build",value:function(e){var t=this.props.buildings[this.props.name],n=!0,r=t.number+e;for(var s in t.cost){t.cost[s]*(1-Math.pow(t.costRatio,e))/(1-t.costRatio)>this.props.resources[s]&&(n=!1,this.props.sendInfo("no resources :("))}if(n&r>0){for(s in t.cost)e>0&&(this.props.harvest(s,-t.cost[s]*(1-Math.pow(t.costRatio,e))/(1-t.costRatio)),this.props.sendInfo(" u spent "+t.cost[s]*e+" "+s+" on a "+this.props.name)),this.props.sendInfo("u destroyed a "+this.props.name);for(var a=0;a<e;a++)this.props.build(this.props.name,1),this.props.incrementCost(this.props.name,1);this.props.applyEffects(this.props.name,e),this.props.applyModifiers(this.props.name,e)}}},{key:"render",value:function(){var e=this;if(!this.props.visibleBuildings.includes(this.props.name))return s.a.createElement("div",null);var t=this.props.buildings[this.props.name];return s.a.createElement("div",{className:"menu-item"},this.props.name," (",t.number,"): ",s.a.createElement("button",{className:"round",onClick:function(){return e.build(1)}}," + ")," ",s.a.createElement("button",{className:"round",onClick:function(){return e.build(-1)}}," - "),s.a.createElement("br",null),s.a.createElement("div",{className:"menu-item-mouseover"},t.desc," ",s.a.createElement("br",null),"cost: ",s.a.createElement("ul",null,Object.entries(t.cost).map(function(e){return s.a.createElement("li",null," ",e[0],": ",F.round(e[1])," ")})," ")))}}]),t}(r.Component),J={build:v,harvest:g,addMaxBirbs:function(e){return{type:"ADD_MAX_BIRBS",n:e}},sendInfo:h,applyEffects:j,applyModifiers:w,incrementCost:function(e,t){return{type:"INCREMENT_COST",name:e,n:t}}},L=Object(o.b)(function(e){return{buildings:e.buildings,visibleBuildings:e.info.visibleBuildings,resources:e.resources,effects:e.effects}},J)(P),z=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"menu-item"}," ",s.a.createElement("button",{className:"round",onClick:function(){return e.props.harvest("knowledge",.1)}}," + ")," study ",s.a.createElement("br",null)," ");this.props.info.progression<2&&(t=s.a.createElement("div",null));var n=s.a.createElement("div",{className:"menu-crafting"},"crafting:",Object.keys(this.props.info.recipes).map(function(t){return s.a.createElement(H,{name:t,info:e.props.info,resources:e.props.resources,harvest:e.props.harvest,sendInfo:e.props.sendInfo})}));return this.props.tech.drawing.researched||(n=s.a.createElement("div",null)),s.a.createElement("div",{label:"home"},"ur at home! ",s.a.createElement("br",null),s.a.createElement("div",{className:"menu-smol"},s.a.createElement("div",{className:"menu-item"}," ",s.a.createElement("button",{className:"round",onClick:function(){return e.props.harvest("bluebs",.5+Math.random())}}," + ")," pick bluebs ",s.a.createElement("br",null)," "),s.a.createElement("div",{className:"menu-item"}," ",s.a.createElement("button",{className:"round",onClick:function(){return e.props.harvest("wood",.5+Math.random())}}," + ")," gather sticks ",s.a.createElement("br",null)," "),t,s.a.createElement("div",{className:"menu-item"}," ",s.a.createElement("button",{className:"round",onClick:function(){return e.props.sendInfo("hi")}}," + ")," hi ",s.a.createElement("br",null)," ")),n,s.a.createElement("div",{className:"menu"},"buildings:",Object.keys(this.props.buildings).map(function(e){return s.a.createElement(L,{name:e})})))}}]),t}(r.Component),H=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"craft",value:function(e,t){var n=this.props.info.recipes[e],r=!0;for(var s in Object.keys(this.props.resources).includes("max"+e)&&this.props.resources[e]+t>this.props.resources["max"+e]&&(t=this.props.resources["max"+e]-this.props.resources[e]),n)n[s]*t>this.props.resources[s]&&(r=!1,this.props.sendInfo("no resources :("));if(r&t>0){for(s in n)this.props.harvest(s,-n[s]*t),this.props.sendInfo("u spent "+n[s]+" "+s);this.props.harvest(e,t)}}},{key:"render",value:function(){var e=this;return this.props.info.visibleResources.includes(this.props.name)?s.a.createElement("div",{className:"menu-item"},s.a.createElement("button",{className:"round-r",onClick:function(){return e.craft(e.props.name,1)}}," + ")," ",this.props.name,s.a.createElement("div",{className:"menu-item-mouseover"},"cost: ",s.a.createElement("ul",null,Object.entries(this.props.info.recipes[this.props.name]).map(function(e){return s.a.createElement("li",null," ",e[0],": ",e[1]," ")})," "))):s.a.createElement("div",null)}}]),t}(r.Component),$={harvest:g,build:v,sendInfo:h,applyEffects:j},G=Object(o.b)(function(e){return{buildings:e.buildings,info:e.info,resources:e.resources,tech:e.tech}},$)(z),V=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.resources,t=this.props.visibleJobs;return this.props.tech.training.researched?s.a.createElement("div",{label:"home"},"give ur birbs jobs ",s.a.createElement("br",null),"u currently have ",e.unemployed," free birbs ",s.a.createElement("br",null),s.a.createElement("div",{className:"menu"},"jobs:",s.a.createElement(Y,{job:"foragers",hire:this.props.hire,birbs:e,show:t}),s.a.createElement(Y,{job:"woodpeckers",hire:this.props.hire,birbs:e,show:t}),s.a.createElement(Y,{job:"scholars",hire:this.props.hire,birbs:e,show:t}),s.a.createElement(Y,{job:"diggers",hire:this.props.hire,birbs:e,show:t}))):s.a.createElement("div",null," maybe you can train these birbs somehow? ")}}]),t}(r.Component),Y=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.show.includes(this.props.job)?s.a.createElement("div",{className:"menu-item"},this.props.job," (",this.props.birbs[this.props.job],")",s.a.createElement("button",{className:"round-y",onClick:function(){return e.props.hire(e.props.job,1)}}," + "),s.a.createElement("button",{className:"round-y",onClick:function(){return e.props.hire(e.props.job,-1)}}," - ")," ",s.a.createElement("br",null)):s.a.createElement("div",null)}}]),t}(r.Component),W=V,K={hire:y,spawnUnit:k},X=Object(o.b)(function(e){return{resources:e.resources,visibleJobs:e.info.visibleJobs,tech:e.tech}},K)(W),q=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).canvasRef=s.a.createRef(),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setupCanvas",value:function(e){var t=window.devicePixelRatio||1,n=e.getBoundingClientRect();e.width=n.width*t,e.height=n.height*t;var r=e.getContext("2d");return r.scale(t,t),r}},{key:"renderBackground",value:function(e,t){var n=this.props.map;n=n[0].map(function(e,t){return n.map(function(e){return e[t]})}),e.fillStyle="#ddd",e.fillRect(-1e3,-1e3,2e3,2e3);for(var r=0;r<n.length;r++)for(var s=0;s<n[0].length;s++){switch(n[r][s]){case 0:e.fillStyle="#85ff3f";break;case 1:e.fillStyle="#54afff";break;case 2:e.fillStyle="#d64017";break;case 3:e.fillStyle="#959699";break;case 4:e.fillStyle="#1cb525";break;default:e.fillStyle="#fff"}e.fillRect(t*r+this.props.corner[1],t*s+this.props.corner[0],t,t)}}},{key:"renderUnits",value:function(e,t){for(var n in e.fillStyle="#42b3f5",this.props.units){n=this.props.units[n];e.beginPath(),e.arc(t*n.location[0]+this.props.corner[1],t*n.location[1]+this.props.corner[0],t/5,0,6.28),e.lineWidth=t/10,e.stroke(),e.fill()}}},{key:"componentDidMount",value:function(){var e=this.canvasRef.current.getContext("2d"),t=this.props.pixSize;this.renderBackground(e,t),this.renderUnits(e,t)}},{key:"componentDidUpdate",value:function(){var e=this.canvasRef.current,t=e.getContext("2d"),n=this.props.pixSize;t.clearRect(0,0,e.width,e.height),this.renderBackground(t,n),this.renderUnits(t,n)}},{key:"render",value:function(){return s.a.createElement("div",{className:"map"},s.a.createElement("canvas",{ref:this.canvasRef,width:"240",height:"240"}))}}]),t}(r.Component),Q={sendInfo:h},Z=Object(o.b)(function(e){return{map:e.info.map,units:e.units}},Q)(q),ee=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={zoom:3,pixSize:12,corner:[0,0]},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"spawnUnit",value:function(){this.props.spawnUnit("borb","bluebirb","unemployed",[3.5,6.5])}},{key:"sendUnitInfo",value:function(e){if(e>=this.props.units.length|e<0)return this.props.sendInfo("unit "+e+" doesn't exist");var t=this.props.units[e];return this.props.sendInfo(t.name+" the "+t.species+" "+t.job+" has id "+e+" and location "+t.location)}},{key:"zoom",value:function(e){this.state.zoom+e>=0&this.state.zoom+e<=7&&this.setState({zoom:this.state.zoom+e,pixSize:{7:2,6:4,5:6,4:8,3:12,2:20,1:28,0:36}[this.state.zoom+e]})}},{key:"move",value:function(e,t){this.setState({corner:[this.state.corner[0]+20*e,this.state.corner[1]+20*t]})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,"its a map! ",s.a.createElement("br",null),"zoom: ",s.a.createElement("button",{className:"round-g",onClick:function(){return e.zoom(-1)}}," + "),s.a.createElement("button",{className:"round-g",onClick:function(){return e.zoom(1)}}," - ")," ",s.a.createElement("br",null),"shift: ",s.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0 ",s.a.createElement("button",{className:"round-g",onClick:function(){return e.move(1,0)}}," \u2191 ")," ",s.a.createElement("br",null),s.a.createElement("button",{className:"round-g",onClick:function(){return e.move(0,1)}}," \u2190 ")," \xa0\xa0\xa0\xa0\xa0\xa0",s.a.createElement("button",{className:"round-g",onClick:function(){return e.move(0,-1)}}," \u2192 ")," ",s.a.createElement("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0 ",s.a.createElement("button",{className:"round-g",onClick:function(){return e.move(-1,0)}}," \u2193 "),s.a.createElement(Z,{pixSize:this.state.pixSize,corner:this.state.corner})," ",s.a.createElement("br",null),"spawn a borb: ",s.a.createElement("button",{className:"round-g",onClick:function(){return e.spawnUnit()}}," + ")," ",s.a.createElement("br",null),"see info about last borb: ",s.a.createElement("button",{className:"round-g",onClick:function(){return e.sendUnitInfo(e.props.units.length-1)}})," ",s.a.createElement("br",null))}}]),t}(r.Component),te={addMap:m,spawnUnit:k,sendInfo:h},ne=Object(o.b)(function(e){return{map:e.info.map,units:e.units}},te)(ee),re=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getPath",value:function(e,t){var n,r=t[1]-e[1]-14,s=e[0]-t[0];return n="m"+(t[0]+45)+" "+(t[1]+18)+"v -7 ",n+="c 0 0 0 "+-r/2+" "+s/2+" "+-r/2,n+="c 0 0 "+s/2+" 0 "+s/2+" "+-r/2,n+="v -7"}},{key:"selectTech",value:function(e){this.props.selectTech(e)}},{key:"render",value:function(){var e=this,t=this.props.name,n=this.props.techList[t];if(!t)return s.a.createElement("div",null," got a null tech ");var r=[],a=!1;0==n.parents.length&&(a=!0);var o=!0,i=!1,c=void 0;try{for(var l,u=n.parents[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var p=l.value,h=this.props.techList[p];h||console.log("unknown parent"+p),r.push(this.getPath(h.position,n.position)),h.researched&&(a=!0)}}catch(m){i=!0,c=m}finally{try{o||null==u.return||u.return()}finally{if(i)throw c}}var d="";a|n.researched?d=n.researched?s.a.createElement("button",{className:"tech-researched",onClick:function(){return e.selectTech(t)}}," ",t," "):s.a.createElement("button",{className:"tech",onClick:function(){return e.selectTech(t)}}," ",t," "):(d=s.a.createElement("div",null),r=[]);var b={left:n.position[0],top:n.position[1]};return s.a.createElement("div",null,s.a.createElement("div",{className:"lines"},s.a.createElement("svg",{height:"600px",width:"600px"},r.map(function(e){return s.a.createElement("path",{d:e,className:"line"})}))),s.a.createElement("div",{className:"tech-wrapper",style:b}," ",d," "))}}]),t}(r.Component),se={sendInfo:h,selectTech:function(e){return{type:"SELECT_TECH",name:e}}},ae=Object(o.b)(function(e){return{techList:e.tech,info:e.info}},se)(re),oe=(n(39),function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"research",value:function(e){var t=this.props.tech[e],n=!0,r=!0;for(var s in t.cost)t.cost[s]>this.props.resources[s]&&(n=!1,this.props.sendInfo("no resources :("));for(var a in t.parents)this.props.tech[t.parents[a]].researched||(r=!1,this.props.sendInfo("previous techs not researched yet :("));if(n&r){for(s in t.cost)this.props.harvest(s,-t.cost[s]),this.props.sendInfo("u spent "+t.cost[s]+" "+s);switch(this.props.research(e),this.props.applyModifiers(e,1),this.props.applyEffects(e,1),console.log(e),e){case"teaching":this.props.addJob("scholars");break;case"woodworking":this.props.addResource("boxes");break;case"fire":this.props.addBuilding("campfire"),this.props.addTab("town","settlement"),this.props.addResource("happiness");break;case"digging":this.props.addResource("clay"),this.props.addResource("stone"),this.props.addJob("diggers");break;case"pottery":this.props.addBuilding("kiln"),this.props.addResource("ceramic");case"drawing":this.props.addResource("drawings"),this.props.addResource("happiness");break;case"writing":this.props.addResource("books");break;case"cartography":this.props.addTab("map","map");break;case"construction":this.props.addBuilding("library")}}}},{key:"displaySelected",value:function(){var e,t=this,n=this.props.info.selectedTech,r=this.props.tech[n];return e=r.researched?s.a.createElement("div",null,"researched",s.a.createElement("br",null)):s.a.createElement("div",null,"research?"," ",s.a.createElement("button",{className:"round",onClick:function(){return t.research(n)}}," ")," ",s.a.createElement("br",null)," "),s.a.createElement("div",null,s.a.createElement("h2",null,n),r.description,s.a.createElement("br",null),"cost:",Object.keys(r.cost).map(function(e){return s.a.createElement("h4",null,"\xa0\xa0",e+" "+r.cost[e]," ")}),e," ",s.a.createElement("br",null))}},{key:"render",value:function(){var e=this,t=this.props.tech,n=Object.keys(t).map(function(n){return s.a.createElement(ae,{name:n,techList:t,research:e.props.research})});return s.a.createElement("div",{label:"science",className:"science"},s.a.createElement("div",{className:"tree-wrapper"},n),s.a.createElement("div",{className:"tech-info"},this.displaySelected()," "))}}]),t}(r.Component)),ie={research:O,harvest:g,sendInfo:h,addMap:m,addTab:d,addBuilding:f,addResource:b,addJob:function(e){return{type:"ADD_JOB",name:e}},applyModifiers:w,applyEffects:j},ce=Object(o.b)(function(e){return{tech:e.tech,resources:e.resources,info:e.info}},ie)(oe),le=n(14),ue=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).counter=1,n.state={daylength:0,time:0},n.props.applyEffects("base",1),n.props.sendInfo("there are also a lot of blueb bushs to eat."),n.props.sendInfo("you look around and see lots of birbs flying around."),n.props.sendInfo("you wake up in a grassy field..."),n.props.addMap([[3,3,0,1,1,1,1,1,0,0,3,3,3,4,0,0,0,0,0,1],[3,3,0,1,1,1,1,1,0,0,0,3,3,3,4,4,0,0,0,0],[3,3,0,0,1,1,1,1,0,0,0,0,3,3,3,4,0,0,0,0],[3,4,0,0,1,1,1,1,0,0,0,0,3,3,3,0,0,0,0,0],[3,4,0,0,0,1,1,1,1,0,0,0,3,3,0,0,0,0,0,0],[3,4,0,0,0,0,1,0,1,1,0,0,3,3,0,3,0,0,0,0],[4,0,0,2,0,0,1,1,1,1,1,0,3,3,0,3,0,0,0,0],[0,0,1,0,0,0,1,1,1,1,1,0,0,3,3,3,3,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,0,0,3,3,3,3,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,0,0,0,3,3,3,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,3,3,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,3,3,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,3,3,3,0,0],[4,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,3,3,0,0],[4,4,0,0,0,0,0,0,0,1,1,1,1,0,0,0,3,3,0,0],[4,4,0,0,0,4,0,1,0,0,1,1,1,0,0,0,3,3,0,0],[4,4,4,0,4,0,0,0,0,0,1,1,0,0,0,0,4,0,3,3],[4,4,4,0,4,4,0,0,0,0,1,1,0,0,0,4,0,0,0,3],[4,4,0,0,0,0,4,0,0,1,1,1,0,0,0,4,4,0,0,3],[4,4,4,0,0,0,0,0,0,1,1,0,0,0,0,0,3,4,0,0]]),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"unlockEverything",value:function(){this.props.setProgression(3),this.props.addTab("town","settlement"),this.props.addTab("science","study"),this.props.addResource("birbs"),this.props.addResource("knowledge"),this.props.set("maxknowledge",5e4),this.props.harvest("wood",100),this.props.harvest("bluebs",100),this.props.harvest("knowledge",5e4),this.props.build("nest",10),this.props.applyEffects("nest",10)}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.tick()},100)}},{key:"tick",value:function(){if(this.counter%5==0){var e=(new Date).getTime();this.setState({dayLength:e-this.state.time,time:e}),this.props.tick()}if(this.props.info.progression<3&this.counter%50==0&&(0==this.props.info.progression&&this.props.buildings.nest.number>0&this.props.resources.bluebs>1&&(this.props.setProgression(1),this.props.addTab("town","birb tree"),this.props.addResource("birbs"),this.props.adoptBirb(1),this.props.spawnUnit("borb","unemployed","unemployed",[3.5,6.5]),this.props.sendInfo("a birb lands in ur nest! maybe you can be friends? maybe other birbs will come too?")),1==this.props.info.progression&&this.props.resources.birbs>=3&&(this.props.setProgression(2),this.props.addResource("knowledge"),this.props.sendInfo("maybe you can learn how to do more things if u study.")),2==this.props.info.progression&&this.props.resources.knowledge>5&&(this.props.setProgression(3),this.props.addTab("science","study"))),this.counter%20==0&this.props.info.progression>0&&(Math.random()<.1+.1*(this.props.resources.maxbirbs-this.props.resources.birbs)&this.props.resources.bluebs>1&&this.props.adoptBirb(1),this.props.resources.bluebs<1&this.props.resources.birbs>0&Math.random()<.5)){var t=this.props.info.hunger;0==t&&(this.props.info.progression<1?this.props.sendInfo("your borbs are hungery.... feed them or they'll fly away!!"):this.props.sendInfo("your borbs are hungery... ")),this.props.setHunger(t+1),t>4&&(this.props.sendInfo("a borb flew away :("),this.props.adoptBirb(-1),this.props.resources.woodpeckers>0?this.props.hire("woodpeckers",-1):this.props.resources.scholars>0?this.props.hire("scholars",-1):this.props.hire("farmers",-1),this.props.setHunger(0))}if(this.counter%2==0)for(var n in this.props.units)this.props.moveUnit(n,.2*(Math.random()-.5),.2*(Math.random()-.5));if(this.counter%1==0)for(var r=0,s=Object.keys(this.props.effects.income);r<s.length;r++){var a=s[r];this.props.income(a,le.getNum(a,this.props.buildings,this.props.resources,this.props.tech))}this.counter%200==0&Math.random()<.01&&this.props.sendInfo("a borb c h o r p s"),this.counter=(this.counter+1)%1200}},{key:"load",value:function(e){try{var t=JSON.parse(localStorage.getItem("state"));null!=t?0!=t.resources.maxbluebs&&(this.props.load(),this.props.sendInfo("loaded!")):"button"==e&&this.props.sendInfo("no save state found :c")}catch(n){"button"==e&&this.props.sendInfo("no save state found :/")}}},{key:"save",value:function(e){localStorage.setItem("state",JSON.stringify(this.props.state)),"button"==e&&this.props.sendInfo("saved!"),"reset"==e&&(localStorage.setItem("state",void 0),this.props.sendInfo("reset successful! refresh the page to start from nothing (or click save right now if you want to cancel the reset!!)"),console.log(localStorage.getItem("state")))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{className:"not-sidebar"},s.a.createElement("div",{className:"header"},s.a.createElement("h3",null,this.state.dayLength,s.a.createElement("button",{className:"save-button",onClick:function(){return e.unlockEverything()}}," debugmode "),s.a.createElement("button",{className:"save-button",onClick:function(){return e.save("button")}}," save "),s.a.createElement("button",{className:"save-button",onClick:function(){return e.load("button")}}," load "),s.a.createElement("button",{className:"save-button",onClick:function(){return e.save("reset")}}," hard reset ")),s.a.createElement("h1",null,"bluebs game ")),s.a.createElement(U,{visibleTabs:this.props.info.visibleTabs},s.a.createElement("div",{label:"home"},s.a.createElement(G,null)," "),s.a.createElement("div",{label:"town"},s.a.createElement(X,null)," "),s.a.createElement("div",{label:"science"},s.a.createElement(ce,null)," "),s.a.createElement("div",{label:"map"},s.a.createElement(ne,null))),s.a.createElement(D,null)))}}]),t}(s.a.Component),pe={harvest:g,build:v,adoptBirb:function(e){return{type:"ADOPT_BIRB",n:e}},set:function(e,t){return{type:"SET",name:e,n:t}},sendInfo:h,tick:function(){return{type:"TICK"}},addTab:d,addResource:b,addMap:m,addBuilding:f,moveUnit:function(e,t,n){return{type:"MOVE_UNIT",id:e,x:t,y:n}},spawnUnit:k,income:function(e,t){return{type:"INCOME",name:e,n:t}},applyEffects:j,setHunger:function(e){return{type:"SET_HUNGER",n:e}},setProgression:function(e){return{type:"SET_PROGRESSION",n:e}},research:O,hire:y,load:function(){return{type:"LOAD"}}},he=Object(o.b)(function(e){return{state:e,resources:e.resources,buildings:e.buildings,info:e.info,units:e.units,tech:e.tech,effects:e.effects}},pe)(ue),de=n(13),be=n(27),me=n(10),fe=n(8),ve=n(7),ge=n.n(ve),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return ge()(e,Object(fe.a)({},t.name,{$set:t.n}));case"ADOPT_BIRB":var n;return e.birbs<=e.maxbirbs-t.n?Object(me.a)({},e,(n={},Object(fe.a)(n,"birbs",e.birbs+t.n),Object(fe.a)(n,"unemployed",e.unemployed+t.n),n)):e;case"HIRE":var r,s=e[t.name]+t.n;if(e.unemployed>=t.n&t.n+e[t.name]>=0)return ge()(e,(r={},Object(fe.a)(r,t.name,{$set:s}),Object(fe.a)(r,"unemployed",{$set:e.unemployed-t.n}),r));default:return e}},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAB":return ge()(e,{visibleTabs:Object(fe.a)({},t.key,{$set:t.name})});case"ADD_RESOURCE":return t.name in e.visibleResources?e:Object.assign({},e,{visibleResources:e.visibleResources.concat(t.name)});case"ADD_JOB":return t.name in e.visibleJobs?e:Object.assign({},e,{visibleJobs:e.visibleJobs.concat(t.name)});case"ADD_MAP":return Object(me.a)({},e,{map:t.map});case"ADD_BUILDING":return ge()(e,{visibleBuildings:{$push:[t.name]}});case"SELECT_TECH":return Object(me.a)({},e,{selectedTech:t.name});case"TICK":var n=e.time[0],r=e.time[1],s=e.time[2]+1;return s>=24&&(s=0,r+=1),r>=31&&(r=1,n={spring:"summer",summer:"fall",fall:"winter",winter:"spring"}[n]),Object(me.a)({},e,{time:[n,r,s]});case"SEND_INFO":return e.info>100&&e.info.pop(),Object.assign({},e,{info:[t.info].concat(e.info)});case"SET_PROGRESSION":return ge()(e,{progression:{$set:t.n}});case"SET_HUNGER":return ge()(e,{hunger:{$set:t.n}});default:return e}},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BUILD":var n=e[t.name].number+t.n;return ge()(e,Object(fe.a)({},t.name,{number:{$set:n}}));case"INCREMENT_COST":var r=Object.assign({},e[t.name].cost);if(1==t.n)for(var s=0,a=Object.keys(r);s<a.length;s++)r[c=a[s]]=e[t.name].cost[c]*e[t.name].costRatio;if(-1==t.n)for(var o=0,i=Object.keys(r);o<i.length;o++){var c;r[c=i[o]]=e[t.name].cost[c]/e[t.name].costRatio}return ge()(e,Object(fe.a)({},t.name,{cost:{$set:r}}));default:return e}},Oe=n(28),je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SPAWN_UNIT":var n={id:t.id,name:t.name,species:t.species,job:t.job,location:t.location};return[].concat(Object(Oe.a)(e),[n]);case"MOVE_UNIT":var r=[t.x+e[t.id].location[0],t.y+e[t.id].location[1]];return ge()(e,Object(fe.a)({},t.id,{location:{$set:r}}));default:return e}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESEARCH":return ge()(e,Object(fe.a)({},t.name,{researched:{$set:1}}));default:return e}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];switch((arguments.length>1?arguments[1]:void 0).type){case"CHANGE_EFFECT":default:return e}},xe=n(14),Ie=function(e,t,n,r){var s=Object.assign({},e);if(t=t.constant[n])for(var a=0,o=Object.keys(t);a<o.length;a++)for(var i=o[a],c=0,l=Object.keys(e);c<l.length;c++){var u=l[c];u==i&&(s[u]+=t[i]*r)}return s},Ce=function(e,t,n){var r=e.effects,s=xe.getNum(t,e.buildings,e.resources,e.tech),a=Object.assign({},r),o=Object.assign({},e.resources),i=r.modifiers[t];if(i)for(var c=0,l=Object.keys(i);c<l.length;c++)for(var u=l[c],p=0,h=Object.keys(i[u]);p<h.length;p++){var d=h[p];if(1==i[u][d].income)for(var b=0,m=Object.keys(r.income);b<m.length;b++){if((E=m[b])==u)for(var f=0,v=Object.keys(r.income[E]);f<v.length;f++){(w=v[f])==d&&(a.income[E][w]/=1+s*i[u][d].value,a.income[E][w]*=1+(n+s)*i[u][d].value)}}else for(var g=0,y=Object.keys(r.constant);g<y.length;g++){var E;if((E=y[g])==u){var k=xe.getNum(E,e.buildings,e.resources,e.tech);o=Ie(o,r,E,-k);for(var O=0,j=Object.keys(r.constant[E]);O<j.length;O++){var w;(w=j[O])==d&&(a.constant[E][w]/=1+s*i[u][d].value,a.constant[E][w]*=1+(n+s)*i[u][d].value)}o=Ie(o,r,E,k)}}}return[a,o]},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_EFFECTS":return Object(me.a)({},e,{resources:Ie(e.resources,e.effects,t.name,t.n)});case"APPLY_MODIFIERS":return Object(me.a)({},e,{effects:Ce(e,t.name,t.n)[0],resources:Ce(e,t.name,t.n)[1]});case"INCOME":for(var n=Object.assign({},e.resources),r=e.effects.income[t.name],s=!0,a=0,o=Object.keys(r);a<o.length;a++)for(var i=o[a],c=0,l=Object.keys(e.resources);c<l.length;c++){var u=l[c];if(u==i){var p=e.resources[u],h=1e13,d=t.n*r[i];e.info.allJobs.includes(t.name)|"birbs"==t.name&&(d*=e.resources.happiness),"max"+u in e.resources&&(h=e.resources["max"+u]),n[u]=p+d,p+d<=0&&(s=!1,n[u]=0),p+d>h&&(n[u]=h);var b=n[u]-e.resources[u];Object.keys(e.effects.constant).includes(u)&0!=b&&(n=Ie(n,e.effects,u,b))}}return s?Object(me.a)({},e,{resources:n}):e;case"HARVEST":var m=e.resources[t.name];h=1e13,"max"+t.name in Object.keys(e)&&(h=e.resources["max"+t.name]);var f=m+t.n;return f<=0&&(f=0),f>h&&(f=h),b=f-e.resources[t.name],(n=Object.assign({},e.resources))[t.name]=f,Object.keys(e.effects.constant).includes(t.name)&0!=b&&(n=Ie(n,e.effects,t.name,b)),Object(me.a)({},e,{resources:n});case"LOAD":return JSON.parse(localStorage.getItem("state"));default:return e}},Te=Object(de.b)({resources:ye,info:Ee,buildings:ke,units:je,tech:we,effects:Ne}),Se=Object(be.a)(Te,Re),Me=document.createElement("div");document.body.appendChild(Me);var De=Object.assign({},{resources:{bluebs:0,wood:0,clay:0,stone:0,knowledge:0,books:0,drawings:0,boxes:0,ceramic:0,maxbluebs:0,maxwood:0,maxclay:0,maxstone:0,maxknowledge:0,maxbooks:0,maxdrawings:0,birbs:0,maxbirbs:0,unemployed:0,foragers:0,woodpeckers:0,scholars:0,diggers:0,happiness:1},buildings:{base:{number:1,desc:"ur tent! (wait, u shouldn't be seeing this...)",cost:{},costRatio:0},nest:{number:0,desc:"a little home for two birbs to live",cost:{wood:10},costRatio:1.1},birbhouse:{number:0,desc:"space for four birbs to live!",cost:{wood:30},costRatio:1.1},campfire:{number:0,desc:"keeps u and ur birbs warm and happy",cost:{wood:20},costRatio:2},library:{number:0,desc:"place to store all ur drawings and books!",cost:{wood:30},costRatio:1.1},kiln:{number:0,desc:"fires pottery",cost:{clay:10},costRatio:1.1}},info:{visibleTabs:{home:"tent"},visibleResources:["bluebs","wood"],visibleJobs:["woodpeckers","foragers"],allJobs:["foragers","woodpeckers","scholars","diggers"],visibleBuildings:["nest"],info:[],time:["spring",1,1],map:[],selectedTech:"studying",progression:0,hunger:0,recipes:{boxes:{wood:50},drawings:{},books:{wood:1,bluebs:1}}},units:[],tech:{studying:{position:[150,0],researched:0,parents:[],children:["training","woodworking"],description:"learn new things about the world!",cost:{knowledge:2}},training:{position:[200,40],researched:0,parents:["studying"],children:["teaching"],description:"teach ur birbs tricks!",cost:{knowledge:5}},teaching:{position:[250,80],researched:0,parents:["training"],children:["drawing"],description:"maybe ur birbs can learn on their own?",cost:{knowledge:10}},drawing:{position:[240,120],researched:0,parents:["teaching"],children:["writing"],description:"draw with stick to remember things",cost:{knowledge:30}},woodworking:{position:[100,50],researched:0,parents:["studying"],children:["digging","fire","construction"],description:"carve fun things",cost:{knowledge:20,wood:20}},digging:{position:[60,100],researched:0,parents:["woodworking"],children:["pottery"],description:"there r all sorts of things in the ground...",cost:{knowledge:40,wood:5}},fire:{position:[150,100],researched:0,parents:["woodworking"],children:["pottery"],description:"hot!",cost:{knowledge:30,wood:15}},pottery:{position:[130,135],researched:0,parents:["digging","fire"],children:[],description:"pots to hold things",cost:{knowledge:40}},construction:{position:[10,70],researched:0,parents:["woodworking"],children:[],description:"build birb houses that can hold more birbs... and maybe more :o",cost:{knowledge:60}},math:{position:[260,160],researched:0,parents:["drawing"],children:["cartography"],description:"think about numbers n stuf.. ",cost:{knowledge:20}},writing:{position:[180,160],researched:0,parents:["drawing"],children:["cartography"],description:"draw with stick to remember things",cost:{knowledge:10}},cartography:{position:[250,200],researched:0,parents:["writing","math"],children:[],description:"doodle a map",cost:{knowledge:10}},exploration:{position:[260,240],researched:0,parents:["cartography"],children:[],description:"send ur birbs on an adventure!",cost:{knowledge:30}}},effects:{constant:{base:{maxbluebs:100,maxwood:100,maxclay:100,maxstone:50,maxknowledge:50,maxboxes:10,maxdrawings:10,maxbooks:10},nest:{maxbirbs:2},birbhouse:{maxbirbs:4},library:{maxbooks:20,maxdrawings:20},boxes:{maxwood:100,maxbluebs:100,maxclay:40,maxstone:20,maxbooks:2},drawings:{maxknowledge:.1},books:{maxknowledge:1},campfire:{happiness:.01}},income:{birbs:{bluebs:-.005},foragers:{bluebs:.02},woodpeckers:{wood:.02},diggers:{clay:.01,stone:.002},scholars:{knowledge:.003},kiln:{wood:-.01,clay:-.01,ceramic:.001}},modifiers:{library:{scholars:{knowledge:{income:1,value:.1}}},campfire:{nest:{maxbirbs:{income:0,value:.1}}}}}}),Be=Object(de.c)(Se,De);Object(a.render)(s.a.createElement(o.a,{store:Be},s.a.createElement("head",null,s.a.createElement("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"})),s.a.createElement("body",null,s.a.createElement(he,null))),Me)}},[[29,1,2]]]);
//# sourceMappingURL=main.6ce606d1.chunk.js.map